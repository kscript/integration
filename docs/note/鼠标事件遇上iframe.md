---
title: 鼠标事件遇上iframe
date: 2021/6/22 16:55:12
---


今天修复了一个拖动窗口的bug.  
原本的功能是使用mousedown、mousemove、mouseup事件来使窗口随鼠标移动, 但窗口中嵌入了iframe, 导致了mouseup事件没有被上层捕获, 这样一来, 如果在iframe内松开了鼠标, 外面依然是拖动状态.  
  
关于这个问题的解决方案:  
1. 可以在iframe里通知上层, 缺点是: 可能会遇到跨域, 而且在非特定的iframe页面里也不好去写  
2. 开始拖动时, 在iframe上覆盖一层透明元素  

第二种方案解决这种特定问题是比较适合的, 没有跨域的弊端, 也不用考虑iframe是什么页面, 拖动过程中, 一般也不会去响应click, mouseover等事件