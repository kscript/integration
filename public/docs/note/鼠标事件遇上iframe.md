---
title: 鼠标事件遇上iframe
date: 2021/6/22 16:55:12
---

### 问题
今天修复了一个拖动窗口的bug.  
原本的功能是使用mousedown、mousemove、mouseup事件来使窗口随鼠标移动, 但窗口中嵌入了iframe, 导致了mouseup事件没有被上层捕获, 这样一来, 如果在iframe内松开了鼠标, 外面依然是拖动状态.  
  
### 解决方案
关于这个问题的解决方案:  
1. 可以在iframe里通知上层  
2. 开始拖动时, 在iframe上覆盖一层透明元素  

#### 分析
- 方案1 如果是iframe间交互, 可能会遇到跨域, 而且在地址不固定的iframe里写也不现实  
- 方案2 解决这种特定问题是比较适合的, 没有跨域的弊端, 也不用考虑iframe是什么页面, 拖动过程中, 一般也不会去响应click, mouseover等事件  